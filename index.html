<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lazy Chef</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@500;700;900&display=swap" rel="stylesheet">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#ff8a00" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<<style>
  :root{
    --bg:#fff7ef;
    --card:#ffffff;
    --border:#f0dfcf;
    --text:#161616;
    --muted:#6f6a66;
    --accent:#ff8a00;
    --accent2:#ffb35c;
    --radius:18px;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Nunito", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
    background: radial-gradient(900px 450px at 20% 0%, rgba(255,138,0,.22), transparent 60%),
                linear-gradient(180deg, #fff7ef 0%, #ffffff 60%);
    color:var(--text);
  }

  header{
    padding: 18px 0 6px;
  }

  .wrap{max-width:980px;margin:0 auto;padding:18px}

  .brand{
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:900;
    font-size:28px;
    letter-spacing:.02em;
  }

  .badge{
    background: var(--accent);
    color:#111;
    padding:6px 10px;
    border-radius:999px;
    font-weight:900;
    font-size:12px;
  }

  .sub{
    margin-top:6px;
    color:var(--muted);
    font-size:15px;
    line-height:1.4;
  }

  .kpi{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .kpi span{
    font-size:12px;
    color:var(--muted);
    border:1px solid var(--border);
    background:rgba(255,255,255,.75);
    padding:7px 10px;
    border-radius:999px;
  }

  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:860px){ .grid{grid-template-columns:1.1fr .9fr;} }

  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:var(--radius);
    padding:14px;
    box-shadow: 0 10px 26px rgba(30,10,0,.06);
  }

  h2{
    margin:0 0 10px;
    font-size:14px;
    color:var(--muted);
    font-weight:900;
    letter-spacing:.04em;
    text-transform:uppercase;
  }

  input{
    width:100%;
    padding: 12px 12px;
    border-radius: 14px;
    border:1px solid var(--border);
    background:#fff;
    color:var(--text);
    font-size:16px;
    outline:none;
  }
  input:focus{
    border-color: rgba(255,138,0,.55);
    box-shadow: 0 0 0 4px rgba(255,138,0,.18);
  }

  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

  .pill{
    border:1px solid var(--border);
    background: #fff;
    padding: 8px 12px;
    border-radius: 999px;
    cursor:pointer;
    user-select:none;
    font-weight:800;
    font-size:13px;
    color:var(--muted);
  }
  .pill.on{
    color:#111;
    border-color: rgba(255,138,0,.45);
    background: rgba(255,138,0,.14);
  }

  .chip{
    background: rgba(255,138,0,.12);
    border: 1px solid rgba(255,138,0,.25);
    color:#111;
    padding:7px 10px;
    border-radius:999px;
    font-size:13px;
    display:flex;
    gap:8px;
    align-items:center;
    font-weight:800;
  }
  .chip button{
    border:none;
    background: transparent;
    color:#111;
    cursor:pointer;
    font-size:14px;
    opacity:.7;
  }
  .chip button:hover{opacity:1}

  .btn{
    border:none;
    background:#111;
    color:#fff;
    padding:12px 14px;
    border-radius:14px;
    font-weight:900;
    cursor:pointer;
  }
  .btn.secondary{
    background: var(--accent);
    color:#111;
  }

  .recipe{display:grid;gap:8px}
  .meta{font-size:13px;color:var(--muted)}
  .title{font-size:18px;font-weight:900;margin:0}

  ol{margin:0;padding-left:18px}
  li{margin-bottom:6px}

  .fav{
    border:1px solid var(--border);
    background:#fff;
    border-radius:14px;
    padding:10px 12px;
    cursor:pointer;
    font-weight:900;
  }
  .fav.on{
    background: rgba(255,138,0,.16);
    border-color: rgba(255,138,0,.35);
  }

  .hint{font-size:12px;color:var(--muted);margin-top:8px;line-height:1.4}
  .footer{text-align:center;color:var(--muted);font-size:12px;padding:18px}
</style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
  LAZY CHEF <span class="badge">NO STRESS</span>
</div>
      <div class="sub">Rezepte f√ºr Tage, an denen dein Motivationslevel im Keller wohnt. üòé</div>
      <div class="kpi" style="margin-top:10px">
        <span>‚â§10 Minuten</span><span>‚â§5 Zutaten</span><span>1 Pfanne optional</span><span>Favoriten ‚úÖ</span>
      </div>
    </div>
  </header>

  <div class="wrap">
    <div class="grid">
      <section class="card">
        <h2 style="margin:0 0 10px">Was hast du daheim?</h2>
        <div class="row" id="chips" style="margin-bottom:10px"></div>
        <input id="ingInput" placeholder="Zutat eintippen + Enter (z.B. pasta, rice, egg, tuna, tomato‚Ä¶)" />
        <div class="hint">Tipp: Schreib‚Äôs einfach (englische Basics funktionieren top). Du kannst auch ‚Äûchicken‚Äú, ‚Äûwrap‚Äú, ‚Äûbeans‚Äú usw.</div>

        <h2 style="margin:14px 0 10px">Lazy Mode</h2>
        <div class="row">
          <div class="pill on" data-filter="max10">‚â§ 10 Minuten</div>
          <div class="pill on" data-filter="max5">‚â§ 5 Zutaten</div>
          <div class="pill" data-filter="onePan">1 Pfanne/Topf</div>
          <div class="pill on" data-filter="noChop">Kein Schnippeln</div>
        </div>

        <div class="row" style="margin-top:12px">
          <button class="btn secondary" id="btnSuggest">Rezepte vorschlagen</button>
          <button class="btn" id="btnReset">Reset</button>
        </div>
      </section>

      <section class="card">
        <h2 style="margin:0 0 10px">Deine Favoriten ‚ù§Ô∏è</h2>
        <div id="favList" class="hint">Noch keine Favoriten ‚Äì das √§ndern wir gleich.</div>
      </section>
    </div>

    <section style="margin-top:12px">
      <h2 style="margin:0 0 10px">Vorschl√§ge</h2>
      <div id="results" class="grid" style="grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));"></div>
    </section>

    <div class="footer">MVP Testversion ‚Ä¢ l√§uft als Web-App auf iPhone/iPad ‚Ä¢ ¬© Lazy Chef</div>
  </div>

<script>
/** --- 40 echte Lazy-Rezepte (Basics, DACH-tauglich, schnell) --- */
const RECIPES = [
  // Pasta/Carbs
  {id:"tomato_pasta", title:"Tomato Pasta (ultra easy)", time:10, maxIng:5, onePan:false, noChop:true,
    need:["pasta","tomato","garlic","oil"], tags:["pasta","tomato"],
    steps:["Pasta kochen (salzen!).","Tomate + Knoblauch kurz in √ñl warm machen.","Pasta rein, umr√ºhren, fertig."]},
  {id:"aglio_olio", title:"Aglio e Olio (Lazy)", time:10, maxIng:5, onePan:false, noChop:false,
    need:["pasta","garlic","oil","chili"], tags:["pasta","garlic"],
    steps:["Pasta kochen.","Knoblauch in √ñl sanft anziehen lassen, Chili dazu.","Pasta rein, fertig."]},
  {id:"pesto_pasta", title:"Pesto Pasta", time:9, maxIng:4, onePan:false, noChop:true,
    need:["pasta","pesto","cheese"], tags:["pasta","pesto"],
    steps:["Pasta kochen.","Pesto + etwas Kochwasser mischen.","Pasta rein, K√§se drauf."]},
  {id:"butter_noodles", title:"Butter-Nudeln + Parmesan", time:8, maxIng:4, onePan:false, noChop:true,
    need:["pasta","butter","cheese","salt"], tags:["pasta","butter"],
    steps:["Pasta kochen.","Butter schmelzen, Pasta rein.","K√§se + Salz, fertig."]},

  // Rice bowls
  {id:"tuna_rice", title:"Tuna Rice Bowl", time:8, maxIng:5, onePan:true, noChop:true,
    need:["rice","tuna","mayo","soy sauce"], tags:["rice","tuna"],
    steps:["Reis (Beutel/Mikrowelle/Rest) warm machen.","Tuna + Mayo + Sojasauce mischen.","Oben drauf, fertig."]},
  {id:"egg_rice", title:"Egg Fried Rice (Restereis)", time:10, maxIng:5, onePan:true, noChop:true,
    need:["rice","egg","soy sauce","oil"], tags:["rice","egg"],
    steps:["√ñl in Pfanne, Reis rein.","Ei dazu, r√ºhren.","Sojasauce, fertig."]},
  {id:"beans_rice", title:"Beans & Rice (Budget)", time:10, maxIng:5, onePan:true, noChop:true,
    need:["rice","beans","tomato","spice"], tags:["rice","beans"],
    steps:["Reis warm machen.","Bohnen + Tomate in Pfanne warmen.","Reis dazu, w√ºrzen."]},

  // Eggs
  {id:"egg_tortilla", title:"Egg Tortilla Melt", time:7, maxIng:4, onePan:true, noChop:true,
    need:["egg","tortilla","cheese"], tags:["egg","tortilla","cheese"],
    steps:["Tortilla in Pfanne.","Ei drauf, stocken lassen.","K√§se drauf, zusammenklappen."]},
  {id:"scramble_toast", title:"Scrambled Eggs + Toast", time:8, maxIng:4, onePan:true, noChop:true,
    need:["egg","butter","bread","salt"], tags:["egg","bread"],
    steps:["Toast machen.","Eier in Butter r√ºhren.","Salz drauf, fertig."]},
  {id:"omelette_cheese", title:"Cheese Omelette", time:9, maxIng:4, onePan:true, noChop:true,
    need:["egg","cheese","butter"], tags:["egg","cheese"],
    steps:["Eier verquirlen.","In Pfanne geben, K√§se drauf.","Zuklappen, fertig."]},

  // Wraps
  {id:"ham_cheese_wrap", title:"Ham-Cheese Wrap", time:5, maxIng:5, onePan:false, noChop:true,
    need:["tortilla","ham","cheese","mayo"], tags:["tortilla","ham","cheese"],
    steps:["Wrap bestreichen.","Ham + K√§se rein.","Rollen, essen."]},
  {id:"chicken_wrap", title:"Chicken Wrap (Rest)", time:8, maxIng:5, onePan:false, noChop:true,
    need:["tortilla","chicken","sauce"], tags:["tortilla","chicken"],
    steps:["Chicken (Reste) warm machen (optional).","In Wrap mit Sauce.","Rollen, fertig."]},
  {id:"tuna_wrap", title:"Tuna Wrap", time:6, maxIng:5, onePan:false, noChop:true,
    need:["tortilla","tuna","mayo","salt"], tags:["tortilla","tuna"],
    steps:["Tuna + Mayo mischen.","In Wrap.","Rollen, fertig."]},

  // Sandwich/Toast
  {id:"caprese_toast", title:"Caprese Toast", time:6, maxIng:5, onePan:false, noChop:false,
    need:["bread","tomato","mozzarella","basil"], tags:["bread","mozzarella","tomato"],
    steps:["Brot toasten.","Tomate + Mozzarella drauf.","Basilikum/Salz, fertig."]},
  {id:"cheese_toast", title:"Cheese Toast (Pfanne)", time:8, maxIng:4, onePan:true, noChop:true,
    need:["bread","cheese","butter"], tags:["bread","cheese"],
    steps:["Brot buttern.","K√§se rein, zusammen.","In Pfanne goldbraun."]},
  {id:"pb_banana", title:"Peanut Butter Banana Toast", time:4, maxIng:4, onePan:false, noChop:false,
    need:["bread","peanut butter","banana"], tags:["bread","banana"],
    steps:["Toast.","Erdnussbutter drauf.","Banane drauf, fertig."]},

  // Protein bowls
  {id:"skyr_bowl", title:"Skyr Bowl (Protein)", time:3, maxIng:5, onePan:false, noChop:true,
    need:["skyr","honey","nuts"], tags:["skyr","yogurt"],
    steps:["Skyr in Sch√ºssel.","Honig drauf.","N√ºsse dr√ºber."]},
  {id:"protein_shake", title:"Protein Shake (Ultra Lazy)", time:2, maxIng:3, onePan:false, noChop:true,
    need:["protein powder","milk"], tags:["protein powder","milk"],
    steps:["Pulver + Milch in Shaker.","Sch√ºtteln.","Fertig."]},

  // Pan meals
  {id:"sausages_pasta", title:"W√ºrstchen + Pasta", time:10, maxIng:5, onePan:true, noChop:false,
    need:["sausages","pasta","tomato"], tags:["sausages","pasta","tomato"],
    steps:["W√ºrstchen anbraten.","Tomate dazu.","Gekochte Pasta rein."]},
  {id:"frozen_veg_eggs", title:"TK-Gem√ºse + Ei", time:10, maxIng:5, onePan:true, noChop:true,
    need:["frozen vegetables","egg","oil","salt"], tags:["frozen vegetables","egg"],
    steps:["TK-Gem√ºse in Pfanne.","Ei dr√ºber, stocken.","Salz, fertig."]},

  // Soups / quick warm
  {id:"ramen_upgrade", title:"Instant Ramen Upgrade", time:10, maxIng:5, onePan:true, noChop:true,
    need:["ramen","egg","soy sauce"], tags:["ramen","egg"],
    steps:["Ramen kochen.","Ei rein (optional).","Sojasauce/Extras, fertig."]},
  {id:"tomato_soup", title:"Tomatensuppe (Dose) + Extra", time:8, maxIng:5, onePan:true, noChop:true,
    need:["tomato soup","cream","cheese"], tags:["tomato soup","tomato"],
    steps:["Suppe erhitzen.","Sahne dazu.","K√§se oben drauf."]},

  // Microwave / ultra lazy
  {id:"microwave_oats", title:"Mikrowellen-Oats", time:5, maxIng:5, onePan:false, noChop:true,
    need:["oats","milk","banana"], tags:["oats","milk"],
    steps:["Hafer + Milch in Sch√ºssel.","Mikrowelle 2‚Äì3 Min.","Banane drauf."]},
  {id:"couscous_bowl", title:"Couscous Bowl", time:10, maxIng:5, onePan:false, noChop:true,
    need:["couscous","hot water","spice","oil"], tags:["couscous"],
    steps:["Couscous + hei√ües Wasser.","5 Min ziehen lassen.","√ñl + Gew√ºrz."]},

  // More easy mains
  {id:"quesadilla", title:"Quesadilla", time:8, maxIng:5, onePan:true, noChop:true,
    need:["tortilla","cheese","salsa"], tags:["tortilla","cheese"],
    steps:["K√§se in Tortilla.","In Pfanne knusprig.","Salsa dazu."]},
  {id:"nacho_plate", title:"Nacho Plate (Ofen optional)", time:10, maxIng:5, onePan:false, noChop:true,
    need:["nachos","cheese","salsa"], tags:["nachos","cheese"],
    steps:["Nachos + K√§se.","Kurz erhitzen (Ofen/MW).","Salsa drauf."]},

  // 40 auff√ºllen (weitere simple, echte Kombis)
  {id:"yogurt_granola", title:"Joghurt + Granola", time:2, maxIng:4, onePan:false, noChop:true,
    need:["yogurt","granola","honey"], tags:["yogurt","granola"], steps:["Joghurt rein.","Granola drauf.","Honig, fertig."]},
  {id:"banana_milk", title:"Banane + Milch (Snack)", time:1, maxIng:2, onePan:false, noChop:true,
    need:["banana","milk"], tags:["banana","milk"], steps:["Banane.","Milch.","Genau."]},
  {id:"salad_tuna", title:"Tuna Salat (sehr lazy)", time:6, maxIng:5, onePan:false, noChop:true,
    need:["salad","tuna","dressing"], tags:["salad","tuna"], steps:["Salat in Sch√ºssel.","Tuna drauf.","Dressing, fertig."]},
  {id:"chickpeas_bowl", title:"Kichererbsen Bowl", time:8, maxIng:5, onePan:true, noChop:true,
    need:["chickpeas","oil","spice"], tags:["chickpeas"], steps:["Kichererbsen in Pfanne.","√ñl + Gew√ºrz.","Kurz knuspern."]},
  {id:"toast_avocado", title:"Avocado Toast", time:5, maxIng:4, onePan:false, noChop:false,
    need:["bread","avocado","salt"], tags:["bread","avocado"], steps:["Toast.","Avocado drauf.","Salz, fertig."]},
  {id:"rice_chicken", title:"Reis + Chicken + Sauce", time:9, maxIng:5, onePan:true, noChop:true,
    need:["rice","chicken","sauce"], tags:["rice","chicken"], steps:["Reis warm.","Chicken warm.","Sauce drauf, fertig."]},
  {id:"pasta_tuna", title:"Pasta Tuna", time:10, maxIng:5, onePan:false, noChop:true,
    need:["pasta","tuna","mayo"], tags:["pasta","tuna"], steps:["Pasta kochen.","Tuna + Mayo mischen.","Alles zusammen."]},
  {id:"instant_mash", title:"Kartoffelp√ºree (Instant) + Extra", time:8, maxIng:5, onePan:true, noChop:true,
    need:["instant mash","milk","butter"], tags:["instant mash","potato"], steps:["Instant nach Packung.","Butter dazu.","Fertig."]},
  {id:"hotdog", title:"Hotdog (Kitchen Minimal)", time:8, maxIng:5, onePan:true, noChop:true,
    need:["bun","sausages","ketchup"], tags:["sausages","bun"], steps:["W√ºrstchen warm machen.","Ins Br√∂tchen.","Ketchup."]},
  {id:"cheese_plate", title:"K√§seplatte (0 Aufwand)", time:2, maxIng:5, onePan:false, noChop:true,
    need:["cheese","crackers"], tags:["cheese","crackers"], steps:["Alles auf Teller.","Fertig.","Kein Kommentar."]},
  {id:"egg_mayo_sandwich", title:"Egg-Mayo Sandwich", time:10, maxIng:5, onePan:true, noChop:true,
    need:["egg","mayo","bread"], tags:["egg","bread"], steps:["Eier hart kochen (10).","Mayo rein.","Auf Brot."]},
  {id:"frozen_pizza", title:"TK-Pizza (Chef‚Äôs Choice)", time:10, maxIng:2, onePan:false, noChop:true,
    need:["frozen pizza"], tags:["frozen pizza","pizza"], steps:["Ofen an.","Pizza rein.","Du bist jetzt Spitzenkoch."]},
  {id:"airfryer_nuggets", title:"Airfryer Nuggets + Dip", time:10, maxIng:5, onePan:false, noChop:true,
    need:["nuggets","dip"], tags:["nuggets"], steps:["Nuggets in Airfryer.","Dip bereitstellen.","Fertig."]},
  {id:"wrap_pizza", title:"Tortilla Pizza", time:10, maxIng:5, onePan:true, noChop:true,
    need:["tortilla","tomato","cheese"], tags:["tortilla","tomato","cheese"], steps:["Tortilla in Pfanne.","Tomate + K√§se drauf.","Deckel drauf, schmelzen."]},
  {id:"noodles_ketchup", title:"Nudeln + Ketchup (Emergency)", time:8, maxIng:3, onePan:false, noChop:true,
    need:["pasta","ketchup"], tags:["pasta","ketchup"], steps:["Nudeln kochen.","Ketchup drauf.","Keine Fragen."]},
  {id:"rice_sardines", title:"Reis + Sardinen", time:8, maxIng:4, onePan:true, noChop:true,
    need:["rice","sardines","lemon"], tags:["rice","sardines"], steps:["Reis warm.","Sardinen drauf.","Zitrone, fertig."]},
  {id:"toast_honey", title:"Toast + Butter + Honig", time:3, maxIng:3, onePan:false, noChop:true,
    need:["bread","butter","honey"], tags:["bread","honey"], steps:["Toast.","Butter.","Honig."]},
  {id:"beans_toast", title:"Beans on Toast", time:10, maxIng:4, onePan:true, noChop:true,
    need:["beans","bread","salt"], tags:["beans","bread"], steps:["Beans erhitzen.","Toast.","Beans drauf."]},
  {id:"yogurt_fruit", title:"Joghurt + Obst", time:3, maxIng:4, onePan:false, noChop:false,
    need:["yogurt","fruit"], tags:["yogurt","fruit"], steps:["Joghurt.","Obst schneiden/werfen.","Fertig."]},
  {id:"corn_tuna", title:"Mais + Tuna Bowl", time:6, maxIng:5, onePan:false, noChop:true,
    need:["corn","tuna","mayo"], tags:["corn","tuna"], steps:["Mais abtropfen.","Tuna + Mayo mischen.","Alles zusammen."]},
  {id:"pasta_cheese", title:"Mac‚Äôn‚ÄôCheese (ultra lazy)", time:10, maxIng:5, onePan:true, noChop:true,
    need:["pasta","cheese","milk","butter"], tags:["pasta","cheese"], steps:["Pasta kochen.","Butter+Milch+K√§se schmelzen.","Pasta rein."]},
];

/** --- State --- */
let ingredients = loadJSON("lazy.ingredients", ["pasta","tomato","garlic","cheese"]);
let filters = loadJSON("lazy.filters", {max10:true, max5:true, onePan:false, noChop:true});
let favorites = new Set(loadJSON("lazy.favorites", []));

/** --- Helpers --- */
function saveJSON(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
function loadJSON(key, fallback){
  try { const v = JSON.parse(localStorage.getItem(key)); return v ?? fallback; }
  catch { return fallback; }
}
function norm(s){ return (s||"").trim().toLowerCase(); }

/** --- UI Elements --- */
const chipsEl = document.getElementById("chips");
const inputEl = document.getElementById("ingInput");
const resultsEl = document.getElementById("results");
const favListEl = document.getElementById("favList");

document.querySelectorAll(".pill[data-filter]").forEach(p => {
  const k = p.dataset.filter;
  p.classList.toggle("on", !!filters[k]);
  p.addEventListener("click", () => {
    filters[k] = !filters[k];
    p.classList.toggle("on", !!filters[k]);
    saveJSON("lazy.filters", filters);
  });
});

document.getElementById("btnSuggest").addEventListener("click", suggest);
document.getElementById("btnReset").addEventListener("click", () => {
  ingredients = [];
  favorites = new Set();
  filters = {max10:true, max5:true, onePan:false, noChop:true};
  saveJSON("lazy.ingredients", ingredients);
  saveJSON("lazy.favorites", []);
  saveJSON("lazy.filters", filters);
  location.reload();
});

inputEl.addEventListener("keydown", (e) => {
  if(e.key === "Enter"){
    e.preventDefault();
    const t = norm(inputEl.value);
    if(!t) return;
    if(!ingredients.includes(t)){
      ingredients.push(t);
      saveJSON("lazy.ingredients", ingredients);
      renderChips();
    }
    inputEl.value = "";
  }
});

/** --- Rendering --- */
function renderChips(){
  chipsEl.innerHTML = "";
  ingredients.forEach(tag => {
    const el = document.createElement("div");
    el.className = "chip";
    el.innerHTML = `<span>${tag}</span>`;
    const btn = document.createElement("button");
    btn.textContent = "‚úï";
    btn.onclick = () => {
      ingredients = ingredients.filter(x => x !== tag);
      saveJSON("lazy.ingredients", ingredients);
      renderChips();
    };
    el.appendChild(btn);
    chipsEl.appendChild(el);
  });
}
function renderFavorites(){
  const fav = RECIPES.filter(r => favorites.has(r.id));
  if(!fav.length){
    favListEl.className = "hint";
    favListEl.textContent = "Noch keine Favoriten ‚Äì klick bei einem Vorschlag auf ‚ù§Ô∏è.";
    return;
  }
  favListEl.className = "";
  favListEl.innerHTML = fav.map(r => `‚Ä¢ ${r.title}`).join("<br>");
}

function passesFilters(r){
  if(filters.max10 && r.time > 10) return false;
  if(filters.max5 && r.maxIng > 5) return false;
  if(filters.onePan && !r.onePan) return false;
  if(filters.noChop && !r.noChop) return false;
  return true;
}
function score(r){
  const have = new Set(ingredients.map(norm));
  const needed = r.need.map(norm);
  const haveCount = needed.filter(n => have.has(n)).length;
  const missing = needed.length - haveCount;
  let s = haveCount*10 - missing*8;
  if(filters.max10 && r.time <= 10) s += 5;
  if(filters.max5 && r.maxIng <= 5) s += 4;
  if(filters.onePan && r.onePan) s += 3;
  if(filters.noChop && r.noChop) s += 3;
  return s;
}

function suggest(){
  const have = new Set(ingredients.map(norm));
  let list = RECIPES
    .filter(passesFilters)
    .filter(r => r.tags.some(t => have.has(norm(t)))); // mind. 1 Tag muss matchen

  list.sort((a,b)=> score(b)-score(a));
  const top = list.slice(0, 6);

  resultsEl.innerHTML = "";
  top.forEach(r => resultsEl.appendChild(recipeCard(r)));
  if(!top.length){
    resultsEl.innerHTML = `<div class="card">üòÖ Keine Treffer. Tipp: probier Basics wie <b>egg</b>, <b>rice</b>, <b>tortilla</b>, <b>cheese</b>, <b>tuna</b>.</div>`;
  }
  renderFavorites();
}

function recipeCard(r){
  const card = document.createElement("div");
  card.className = "card recipe";
  const favOn = favorites.has(r.id);

  card.innerHTML = `
    <div class="row" style="justify-content:space-between;">
      <h3 class="title">${r.title}</h3>
      <button class="fav ${favOn ? "on":""}" aria-label="Favorit">${favOn ? "‚ù§Ô∏è" : "ü§ç"}</button>
    </div>
    <div class="meta">‚è± ${r.time} Min ¬∑ üßÇ max ${r.maxIng} Zutaten ¬∑ ${r.onePan ? "1 Pfanne" : "mehrteilig"} ¬∑ ${r.noChop ? "kein Schnippeln" : "mit Schneiden"}</div>
    <div><b>Ben√∂tigt:</b> ${r.need.join(", ")}</div>
    <div><b>Steps:</b></div>
    <ol>${r.steps.map(s=>`<li>${s}</li>`).join("")}</ol>
  `;

  card.querySelector(".fav").onclick = () => {
    if(favorites.has(r.id)) favorites.delete(r.id); else favorites.add(r.id);
    saveJSON("lazy.favorites", Array.from(favorites));
    suggest(); // rerender cards
  };

  return card;
}

/** Init */
renderChips();
renderFavorites();
suggest();
</script>
</body>
</html>
